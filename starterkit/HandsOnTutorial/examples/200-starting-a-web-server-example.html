<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Example: Starting a Web Server in your Cluster
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="An open source framework for large-scale distributed computation and data processing written in F#."/>
    <meta name="author" content="Jan Dzik, Nick Palladinos, Kostas Rontogiannis, Eirik Tsarpalis"/>
    
    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link rel="icon" type="image/png" href="http://www.mbrace.io/img/favicon-196x196.png" sizes="196x196"/>
    <link rel="icon" type="image/png" href="http://www.mbrace.io/img/favicon-160x160.png" sizes="160x160"/>
    <link rel="icon" type="image/png" href="http://www.mbrace.io/img/favicon-96x96.png" sizes="96x96"/>
    <link rel="icon" type="image/png" href="http://www.mbrace.io/img/favicon-16x16.png" sizes="16x16"/>
    <link rel="icon" type="image/png" href="http://www.mbrace.io/img/favicon-32x32.png" sizes="32x32"/>

    <link type="text/css" rel="stylesheet" href="http://www.mbrace.io/content/style.css" />
    <script type="text/javascript" src="http://www.mbrace.io/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://github.com/mbraceproject/MBrace.Core">github page</a></li>
        </ul>
        <h3 class="muted"><a href="http://www.mbrace.io/index.html">MBrace.Core and MBrace.Azure</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Example-Starting-a-Web-Server-in-your-Cluster" class="anchor" href="#Example-Starting-a-Web-Server-in-your-Cluster">Example: Starting a Web Server in your Cluster</a></h1>

<p>This tutorial illustrates creating a cloud process which 
acts as a web server to monitor and control the cluster.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#load</span> <span class="s">&quot;../lib/webserver.fsx&quot;</span>
<span class="prep">#load</span> <span class="s">&quot;../lib/sieve.fsx&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="i">Suave</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="i">Suave</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="i">Types</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 11)" onmouseover="showTip(event, 'fs6', 11)" class="i">Suave</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 12)" onmouseover="showTip(event, 'fs8', 12)" class="i">Http</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 13)" onmouseover="showTip(event, 'fs6', 13)" class="i">Suave</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 14)" onmouseover="showTip(event, 'fs8', 14)" class="i">Http</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 15)" onmouseover="showTip(event, 'fs9', 15)" class="i">Applicatives</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 16)" onmouseover="showTip(event, 'fs6', 16)" class="i">Suave</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 17)" onmouseover="showTip(event, 'fs8', 17)" class="i">Http</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 18)" onmouseover="showTip(event, 'fs10', 18)" class="i">Successful</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 19)" onmouseover="showTip(event, 'fs6', 19)" class="i">Suave</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 20)" onmouseover="showTip(event, 'fs11', 20)" class="i">Web</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs12', 21)" onmouseover="showTip(event, 'fs12', 21)" class="i">Webserver</span>
</code></pre></td>
</tr>
</table>

<h1><a name="Starting-a-WebServer-on-your-MBrace-cluster" class="anchor" href="#Starting-a-WebServer-on-your-MBrace-cluster">Starting a WebServer on your MBrace cluster</a></h1>

<blockquote>
  <p>This example is from the <a href="https://github.com/mbraceproject/MBrace.StarterKit">MBrace Starter Kit</a>.</p>
</blockquote>

<p>In this tutorial, you learn how to start a web server on your MBrace cluster that can introspect
into the cluster, schedule work, report on jobs and so on.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 22)" onmouseover="showTip(event, 'fs13', 22)" class="f">getCluster</span>() <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs14', 23)" onmouseover="showTip(event, 'fs14', 23)" class="t">Config</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 24)" onmouseover="showTip(event, 'fs15', 24)" class="f">GetCluster</span>() 
</code></pre></td>
</tr>
</table>

<p>This Suave request is executed in response to a GET on</p>

<p><a href="http://nn.nn.nn.nn/">http://nn.nn.nn.nn/</a></p>

<p>It uses cluster.GetWorkers to access information from the cluster.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 25)" onmouseover="showTip(event, 'fs16', 25)" class="f">getWorkersRequest</span> <span onmouseout="hideTip(event, 'fs17', 26)" onmouseover="showTip(event, 'fs17', 26)" class="i">ctxt</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs18', 27)" onmouseover="showTip(event, 'fs18', 27)" class="i">async</span> {
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 28)" onmouseover="showTip(event, 'fs19', 28)" class="i">cluster</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 29)" onmouseover="showTip(event, 'fs13', 29)" class="f">getCluster</span>()
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 30)" onmouseover="showTip(event, 'fs20', 30)" class="i">workers</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 31)" onmouseover="showTip(event, 'fs19', 31)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 32)" onmouseover="showTip(event, 'fs21', 32)" class="i">Workers</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 33)" onmouseover="showTip(event, 'fs22', 33)" class="i">msg</span> <span class="o">=</span> 
              [ <span class="k">yield</span> <span class="s">&quot;&lt;html&gt;&quot;</span>
                <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs23', 34)" onmouseover="showTip(event, 'fs23', 34)" class="t">Angular</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 35)" onmouseover="showTip(event, 'fs24', 35)" class="i">header</span>
                <span class="k">yield</span> <span class="s">&quot;&lt;body&gt;&quot;</span>
                <span class="k">yield!</span> <span onmouseout="hideTip(event, 'fs20', 36)" onmouseover="showTip(event, 'fs20', 36)" class="i">workers</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs23', 37)" onmouseover="showTip(event, 'fs23', 37)" class="t">Angular</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 38)" onmouseover="showTip(event, 'fs25', 38)" class="f">table</span> [<span class="s">&quot;ID&quot;</span>;<span class="s">&quot;Heartbeat&quot;</span>] (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs26', 39)" onmouseover="showTip(event, 'fs26', 39)" class="i">w</span> <span class="k">-&gt;</span> 
                    [ <span onmouseout="hideTip(event, 'fs26', 40)" onmouseover="showTip(event, 'fs26', 40)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 41)" onmouseover="showTip(event, 'fs27', 41)" class="i">Id</span>; <span onmouseout="hideTip(event, 'fs28', 42)" onmouseover="showTip(event, 'fs28', 42)" class="f">sprintf</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs26', 43)" onmouseover="showTip(event, 'fs26', 43)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 44)" onmouseover="showTip(event, 'fs29', 44)" class="i">LastHeartbeat</span> ])
                <span class="k">yield</span> <span class="s">&quot;&lt;/body&gt;&quot;</span>
                <span class="k">yield</span> <span class="s">&quot;&lt;/html&gt;&quot;</span> ]
              <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 45)" onmouseover="showTip(event, 'fs30', 45)" class="t">String</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 46)" onmouseover="showTip(event, 'fs31', 46)" class="f">concat</span> <span class="s">&quot;</span><span class="e">\n</span><span class="s">&quot;</span>
            <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs32', 47)" onmouseover="showTip(event, 'fs32', 47)" class="i">rsp</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 48)" onmouseover="showTip(event, 'fs33', 48)" class="f">OK</span> <span onmouseout="hideTip(event, 'fs22', 49)" onmouseover="showTip(event, 'fs22', 49)" class="i">msg</span> <span onmouseout="hideTip(event, 'fs17', 50)" onmouseover="showTip(event, 'fs17', 50)" class="i">ctxt</span> 
            <span class="k">return</span> <span onmouseout="hideTip(event, 'fs32', 51)" onmouseover="showTip(event, 'fs32', 51)" class="i">rsp</span>}
</code></pre></td>
</tr>
</table>

<p>This Suave request is executed in response to a GET on 
   <a href="http://nn.nn.nn.nn/cluster/logs">http://nn.nn.nn.nn/cluster/logs</a></p>

<p>It uses cluster.GetLogs to access information from the cluster.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 52)" onmouseover="showTip(event, 'fs34', 52)" class="f">getLogsRequest</span> <span onmouseout="hideTip(event, 'fs17', 53)" onmouseover="showTip(event, 'fs17', 53)" class="i">ctxt</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs18', 54)" onmouseover="showTip(event, 'fs18', 54)" class="i">async</span> {
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 55)" onmouseover="showTip(event, 'fs19', 55)" class="i">cluster</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 56)" onmouseover="showTip(event, 'fs13', 56)" class="f">getCluster</span>()
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 57)" onmouseover="showTip(event, 'fs35', 57)" class="i">logs</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 58)" onmouseover="showTip(event, 'fs19', 58)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs36', 59)" onmouseover="showTip(event, 'fs36', 59)" class="f">GetSystemLogs</span>()
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 60)" onmouseover="showTip(event, 'fs22', 60)" class="i">msg</span> <span class="o">=</span> 
              [ <span class="k">yield</span> <span class="s">&quot;&lt;html&gt;&quot;</span>
                <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs23', 61)" onmouseover="showTip(event, 'fs23', 61)" class="t">Angular</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 62)" onmouseover="showTip(event, 'fs24', 62)" class="i">header</span>
                <span class="k">yield</span> <span class="s">&quot;&lt;body&gt;&quot;</span>
                <span class="k">yield!</span> <span onmouseout="hideTip(event, 'fs35', 63)" onmouseover="showTip(event, 'fs35', 63)" class="i">logs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs23', 64)" onmouseover="showTip(event, 'fs23', 64)" class="t">Angular</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 65)" onmouseover="showTip(event, 'fs25', 65)" class="f">table</span> [<span class="s">&quot;Time&quot;</span>;<span class="s">&quot;Message&quot;</span>] (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs37', 66)" onmouseover="showTip(event, 'fs37', 66)" class="i">w</span> <span class="k">-&gt;</span> 
                    [ <span onmouseout="hideTip(event, 'fs28', 67)" onmouseover="showTip(event, 'fs28', 67)" class="f">sprintf</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs37', 68)" onmouseover="showTip(event, 'fs37', 68)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 69)" onmouseover="showTip(event, 'fs38', 69)" class="i">DateTime</span>; <span onmouseout="hideTip(event, 'fs37', 70)" onmouseover="showTip(event, 'fs37', 70)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs39', 71)" onmouseover="showTip(event, 'fs39', 71)" class="i">Message</span> ])
                <span class="k">yield</span> <span class="s">&quot;&lt;/body&gt;&quot;</span>
                <span class="k">yield</span> <span class="s">&quot;&lt;/html&gt;&quot;</span> ]
              <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 72)" onmouseover="showTip(event, 'fs30', 72)" class="t">String</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 73)" onmouseover="showTip(event, 'fs31', 73)" class="f">concat</span> <span class="s">&quot;</span><span class="e">\n</span><span class="s">&quot;</span>
            <span class="k">return!</span> <span onmouseout="hideTip(event, 'fs33', 74)" onmouseover="showTip(event, 'fs33', 74)" class="f">OK</span> <span class="i">msg</span> <span onmouseout="hideTip(event, 'fs17', 75)" onmouseover="showTip(event, 'fs17', 75)" class="i">ctxt</span>  }

<span class="c">// This Suave request is executed in response to a GET on </span>
<span class="c">//   http://nn.nn.nn.nn/cluster/submit/primes/%d</span>
<span class="c">//</span>
<span class="c">// It uses cluster.CreateProcess to create a new job in the cluster.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 76)" onmouseover="showTip(event, 'fs40', 76)" class="f">computePrimesRequest</span> <span onmouseout="hideTip(event, 'fs41', 77)" onmouseover="showTip(event, 'fs41', 77)" class="i">n</span> <span onmouseout="hideTip(event, 'fs17', 78)" onmouseover="showTip(event, 'fs17', 78)" class="i">ctxt</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs18', 79)" onmouseover="showTip(event, 'fs18', 79)" class="i">async</span> {
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 80)" onmouseover="showTip(event, 'fs19', 80)" class="i">cluster</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 81)" onmouseover="showTip(event, 'fs13', 81)" class="f">getCluster</span>()
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 82)" onmouseover="showTip(event, 'fs42', 82)" class="i">task</span> <span class="o">=</span> 
              <span onmouseout="hideTip(event, 'fs19', 83)" onmouseover="showTip(event, 'fs19', 83)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs43', 84)" onmouseover="showTip(event, 'fs43', 84)" class="f">CreateProcess</span> 
                (<span class="i">cloud</span> { <span class="k">let</span> <span class="i">primes</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs44', 85)" onmouseover="showTip(event, 'fs44', 85)" class="i">Sieve</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs45', 86)" onmouseover="showTip(event, 'fs45', 86)" class="i">getPrimes</span> <span onmouseout="hideTip(event, 'fs41', 87)" onmouseover="showTip(event, 'fs41', 87)" class="i">n</span>
                         <span class="k">return</span> <span onmouseout="hideTip(event, 'fs28', 88)" onmouseover="showTip(event, 'fs28', 88)" class="i">sprintf</span> <span class="s">&quot;calculated %d primes: %A&quot;</span> <span class="i">primes</span><span class="o">.</span><span class="i">Length</span> <span class="i">primes</span> })
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 89)" onmouseover="showTip(event, 'fs22', 89)" class="i">msg</span> <span class="o">=</span> 
              [ <span class="k">yield</span> <span class="s">&quot;&lt;html&gt;&quot;</span>
                <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs23', 90)" onmouseover="showTip(event, 'fs23', 90)" class="t">Angular</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 91)" onmouseover="showTip(event, 'fs24', 91)" class="i">header</span>
                <span class="k">yield</span> <span class="s">&quot;&lt;body&gt;&quot;</span>
                <span class="k">yield</span> (<span onmouseout="hideTip(event, 'fs28', 92)" onmouseover="showTip(event, 'fs28', 92)" class="f">sprintf</span> <span class="s">&quot;&lt;p&gt;Created job </span><span class="pf">%s</span><span class="s">&lt;/p&gt;&quot;</span> <span onmouseout="hideTip(event, 'fs42', 93)" onmouseover="showTip(event, 'fs42', 93)" class="i">task</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 94)" onmouseover="showTip(event, 'fs46', 94)" class="i">Id</span>)
                <span class="k">yield</span> <span class="s">&quot;&lt;/body&gt;&quot;</span>
                <span class="k">yield</span> <span class="s">&quot;&lt;/html&gt;&quot;</span> ]
              <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 95)" onmouseover="showTip(event, 'fs30', 95)" class="t">String</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 96)" onmouseover="showTip(event, 'fs31', 96)" class="f">concat</span> <span class="s">&quot;</span><span class="e">\n</span><span class="s">&quot;</span>
            <span class="k">return!</span> <span onmouseout="hideTip(event, 'fs33', 97)" onmouseover="showTip(event, 'fs33', 97)" class="f">OK</span> <span onmouseout="hideTip(event, 'fs22', 98)" onmouseover="showTip(event, 'fs22', 98)" class="i">msg</span> <span onmouseout="hideTip(event, 'fs17', 99)" onmouseover="showTip(event, 'fs17', 99)" class="i">ctxt</span>  }

<span class="c">// This Suave request is executed in response to a GET on </span>
<span class="c">//   http://nn.nn.nn.nn/cluster/job/%d</span>
<span class="c">//</span>
<span class="c">// It uses cluster.GetProcess to create a new job in the cluster.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 100)" onmouseover="showTip(event, 'fs47', 100)" class="f">getJobRequest</span> <span onmouseout="hideTip(event, 'fs48', 101)" onmouseover="showTip(event, 'fs48', 101)" class="i">v</span> <span onmouseout="hideTip(event, 'fs17', 102)" onmouseover="showTip(event, 'fs17', 102)" class="i">ctxt</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs18', 103)" onmouseover="showTip(event, 'fs18', 103)" class="i">async</span> {
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 104)" onmouseover="showTip(event, 'fs19', 104)" class="i">cluster</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 105)" onmouseover="showTip(event, 'fs13', 105)" class="f">getCluster</span>()
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 106)" onmouseover="showTip(event, 'fs49', 106)" class="i">task</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 107)" onmouseover="showTip(event, 'fs19', 107)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 108)" onmouseover="showTip(event, 'fs50', 108)" class="f">GetProcessById</span> <span onmouseout="hideTip(event, 'fs48', 109)" onmouseover="showTip(event, 'fs48', 109)" class="i">v</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 110)" onmouseover="showTip(event, 'fs22', 110)" class="i">msg</span> <span class="o">=</span> 
                [ <span class="k">yield</span> <span class="s">&quot;&lt;html&gt;&quot;</span>
                  <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs23', 111)" onmouseover="showTip(event, 'fs23', 111)" class="t">Angular</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 112)" onmouseover="showTip(event, 'fs24', 112)" class="i">header</span>
                  <span class="k">yield</span> <span class="s">&quot;&lt;body&gt;&quot;</span>
                  <span class="k">yield</span> (<span onmouseout="hideTip(event, 'fs28', 113)" onmouseover="showTip(event, 'fs28', 113)" class="f">sprintf</span> <span class="s">&quot;&lt;p&gt;Job </span><span class="pf">%s</span><span class="s">, Completed: </span><span class="pf">%A</span><span class="s">, Result: </span><span class="pf">%s</span><span class="s">&lt;/p&gt;&quot;</span> <span onmouseout="hideTip(event, 'fs49', 114)" onmouseover="showTip(event, 'fs49', 114)" class="i">task</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 115)" onmouseover="showTip(event, 'fs46', 115)" class="i">Id</span> <span onmouseout="hideTip(event, 'fs49', 116)" onmouseover="showTip(event, 'fs49', 116)" class="i">task</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 117)" onmouseover="showTip(event, 'fs51', 117)" class="i">Status</span> (<span class="k">try</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs49', 118)" onmouseover="showTip(event, 'fs49', 118)" class="i">task</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 119)" onmouseover="showTip(event, 'fs51', 119)" class="i">Status</span> <span class="o">=</span> <span class="i">CloudProcessStatus</span><span class="o">.</span><span class="i">Completed</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs28', 120)" onmouseover="showTip(event, 'fs28', 120)" class="f">sprintf</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> (<span onmouseout="hideTip(event, 'fs49', 121)" onmouseover="showTip(event, 'fs49', 121)" class="i">task</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 122)" onmouseover="showTip(event, 'fs52', 122)" class="f">AwaitResultBoxed</span>()) <span class="k">else</span> <span class="s">&quot;&quot;</span> <span class="k">with</span> _ <span class="k">-&gt;</span> <span class="s">&quot;&lt;err&gt;&quot;</span>) )
                  <span class="k">yield</span> <span class="s">&quot;&lt;/body&gt;&quot;</span>
                  <span class="k">yield</span> <span class="s">&quot;&lt;/html&gt;&quot;</span> ]
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs30', 123)" onmouseover="showTip(event, 'fs30', 123)" class="t">String</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 124)" onmouseover="showTip(event, 'fs31', 124)" class="f">concat</span> <span class="s">&quot;</span><span class="e">\n</span><span class="s">&quot;</span>
            <span class="k">return!</span> <span onmouseout="hideTip(event, 'fs33', 125)" onmouseover="showTip(event, 'fs33', 125)" class="f">OK</span> <span class="i">msg</span> <span onmouseout="hideTip(event, 'fs17', 126)" onmouseover="showTip(event, 'fs17', 126)" class="i">ctxt</span>  }
</code></pre></td>
</tr>
</table>

<p>Now the overall specification of the server:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 127)" onmouseover="showTip(event, 'fs53', 127)" class="f">webServerSpec</span> () <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs54', 128)" onmouseover="showTip(event, 'fs54', 128)" class="f">choose</span>
    [ <span onmouseout="hideTip(event, 'fs55', 129)" onmouseover="showTip(event, 'fs55', 129)" class="f">GET</span> <span class="o">&gt;</span><span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs54', 130)" onmouseover="showTip(event, 'fs54', 130)" class="f">choose</span>
                [ <span onmouseout="hideTip(event, 'fs56', 131)" onmouseover="showTip(event, 'fs56', 131)" class="f">path</span> <span class="s">&quot;/&quot;</span> <span class="o">&gt;</span><span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 132)" onmouseover="showTip(event, 'fs33', 132)" class="f">OK</span> <span class="s">&quot;Welcome to the cluster&quot;</span> 
                  <span onmouseout="hideTip(event, 'fs56', 133)" onmouseover="showTip(event, 'fs56', 133)" class="f">path</span> <span class="s">&quot;/cluster/workers&quot;</span> <span class="o">&gt;</span><span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 134)" onmouseover="showTip(event, 'fs16', 134)" class="f">getWorkersRequest</span>
                  <span onmouseout="hideTip(event, 'fs56', 135)" onmouseover="showTip(event, 'fs56', 135)" class="f">path</span> <span class="s">&quot;/cluster/logs&quot;</span> <span class="o">&gt;</span><span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 136)" onmouseover="showTip(event, 'fs34', 136)" class="f">getLogsRequest</span>
                  <span onmouseout="hideTip(event, 'fs57', 137)" onmouseover="showTip(event, 'fs57', 137)" class="f">pathScan</span> <span class="s">&quot;/cluster/job/</span><span class="pf">%s</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs47', 138)" onmouseover="showTip(event, 'fs47', 138)" class="f">getJobRequest</span>
                  <span onmouseout="hideTip(event, 'fs57', 139)" onmouseover="showTip(event, 'fs57', 139)" class="f">pathScan</span> <span class="s">&quot;/cluster/submit/primes/</span><span class="pf">%d</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs40', 140)" onmouseover="showTip(event, 'fs40', 140)" class="f">computePrimesRequest</span> ]
      <span onmouseout="hideTip(event, 'fs58', 141)" onmouseover="showTip(event, 'fs58', 141)" class="f">POST</span> <span class="o">&gt;</span><span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs54', 142)" onmouseover="showTip(event, 'fs54', 142)" class="f">choose</span>
                [ <span onmouseout="hideTip(event, 'fs56', 143)" onmouseover="showTip(event, 'fs56', 143)" class="f">path</span> <span class="s">&quot;/hello&quot;</span> <span class="o">&gt;</span><span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 144)" onmouseover="showTip(event, 'fs33', 144)" class="f">OK</span> <span class="s">&quot;Hello POST&quot;</span>
                  <span onmouseout="hideTip(event, 'fs56', 145)" onmouseover="showTip(event, 'fs56', 145)" class="f">path</span> <span class="s">&quot;/goodbye&quot;</span> <span class="o">&gt;</span><span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 146)" onmouseover="showTip(event, 'fs33', 146)" class="f">OK</span> <span class="s">&quot;Good bye POST&quot;</span> ] ]
</code></pre></td>
</tr>
</table>

<p>Now connect to the cluster:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs59', 147)" onmouseover="showTip(event, 'fs59', 147)" class="i">cluster</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 148)" onmouseover="showTip(event, 'fs13', 148)" class="f">getCluster</span>()

<span onmouseout="hideTip(event, 'fs59', 149)" onmouseover="showTip(event, 'fs59', 149)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs60', 150)" onmouseover="showTip(event, 'fs60', 150)" class="f">ShowProcesses</span>()
</code></pre></td>
</tr>
</table>

<p>Use this to inspect the endpoints we can bind to in the cluster. 
The code below is specific to MBrace.Azure where your code runs as part
of an Azure worker role.</p>

<blockquote>
  <p>Note: If using a locally simulated MBrace.Thespian cluster then you need to adjust this example to use an appropriate endpoint IP address.</p>
</blockquote>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 151)" onmouseover="showTip(event, 'fs61', 151)" class="i">endPointNames</span> <span class="o">=</span> 
    <span class="i">cloud</span> { <span class="k">return</span> <span onmouseout="hideTip(event, 'fs62', 152)" onmouseover="showTip(event, 'fs62', 152)" class="i">Microsoft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 153)" onmouseover="showTip(event, 'fs63', 153)" class="i">WindowsAzure</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 154)" onmouseover="showTip(event, 'fs64', 154)" class="i">ServiceRuntime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs65', 155)" onmouseover="showTip(event, 'fs65', 155)" class="i">RoleEnvironment</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs66', 156)" onmouseover="showTip(event, 'fs66', 156)" class="i">CurrentRoleInstance</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs67', 157)" onmouseover="showTip(event, 'fs67', 157)" class="i">InstanceEndpoints</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 158)" onmouseover="showTip(event, 'fs68', 158)" class="i">Keys</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs69', 159)" onmouseover="showTip(event, 'fs69', 159)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 160)" onmouseover="showTip(event, 'fs70', 160)" class="i">toArray</span> }
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 161)" onmouseover="showTip(event, 'fs59', 161)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs71', 162)" onmouseover="showTip(event, 'fs71', 162)" class="f">Run</span>
</code></pre></td>
</tr>
</table>

<p>By default, MBrace.Azure clusters created using the Azure CustomCloudService allow us to bind to</p>

<ul>
<li>HTTP endpoint 'DefaultHttpEndpoint'</li>
<li>HTTP endpoint 'MBraceStats'</li>
<li>TCP endpoint 'DefaultTcpEndpoint'</li>
</ul>

<p>Here we bind to DefaultHttpEndpoint.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs72', 163)" onmouseover="showTip(event, 'fs72', 163)" class="i">serverJob</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs73', 164)" onmouseover="showTip(event, 'fs73', 164)" class="f">suaveServerInCloud</span> <span class="s">&quot;DefaultHttpEndpoint&quot;</span> <span onmouseout="hideTip(event, 'fs53', 165)" onmouseover="showTip(event, 'fs53', 165)" class="f">webServerSpec</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 166)" onmouseover="showTip(event, 'fs59', 166)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs43', 167)" onmouseover="showTip(event, 'fs43', 167)" class="f">CreateProcess</span>
</code></pre></td>
</tr>
</table>

<p>After you start the webserver (by binding to this internal endpoint), the website will 
be published to the corresponding public endpoint. You can find the IP
address or URL for the public endpoint by looking for 'Input Endpoints'
in the 'Configuration' section of the Azure management console page for the 
Cloud Service for the MBrace cluster.</p>

<p>For example, the public URL for the MBraceWorkerRole may be <a href="http://191.233.103.54:80
*)">http://191.233.103.54:80
*)</a></p>

<p>(<em></em> Use this to inspect the status of the web server job:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs72', 168)" onmouseover="showTip(event, 'fs72', 168)" class="i">serverJob</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs74', 169)" onmouseover="showTip(event, 'fs74', 169)" class="f">ShowInfo</span>()

<span class="c">(** If the webserver doesn&#39;t start, then use this to see the logging output from webserver.fsx: *)</span> 

<span onmouseout="hideTip(event, 'fs72', 170)" onmouseover="showTip(event, 'fs72', 170)" class="i">serverJob</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs75', 171)" onmouseover="showTip(event, 'fs75', 171)" class="f">ShowLogs</span>()
</code></pre></td>
</tr>
</table>

<p>Use this to cancel the web server (via the distributed cancellationToken being cancelled):</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// serverJob.Cancel()</span>
</code></pre></td>
</tr>
</table>

<p>Use this to wait for the web server to exit after cancellation:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// serverJob.Result</span>
</code></pre></td>
</tr>
</table>

<p>In this tutorial, you've learned how to start a web server on an MBrace cluster which can respond
to requests, control the cluster, access storage and so on.
Continue with further samples to learn more about the MBrace programming model.</p>

<blockquote>
  <p>Note, you can use the above techniques from both scripts and compiled projects. To see the components referenced 
by this script, see <a href="../ThespianCluster.html">ThespianCluster.fsx</a> or <a href="../AzureCluster.html">AzureCluster.fsx</a>.</p>
</blockquote>

<div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">namespace System.IO</div>
<div class="tip" id="fs3">namespace MBrace</div>
<div class="tip" id="fs4">namespace MBrace.Core</div>
<div class="tip" id="fs5">namespace MBrace.Flow</div>
<div class="tip" id="fs6">namespace Suave</div>
<div class="tip" id="fs7">module Types<br /><br />from Suave</div>
<div class="tip" id="fs8">module Http<br /><br />from Suave</div>
<div class="tip" id="fs9">module Applicatives<br /><br />from Suave.Http</div>
<div class="tip" id="fs10">module Successful<br /><br />from Suave.Http</div>
<div class="tip" id="fs11">module Web<br /><br />from Suave</div>
<div class="tip" id="fs12">module Webserver</div>
<div class="tip" id="fs13">val getCluster : unit -&gt; MBrace.Azure.AzureCluster<br /><br />Full name: 200-starting-a-web-server-example.getCluster</div>
<div class="tip" id="fs14">module Config</div>
<div class="tip" id="fs15">val GetCluster : unit -&gt; MBrace.Azure.AzureCluster<br /><br />Full name: Config.GetCluster</div>
<div class="tip" id="fs16">val getWorkersRequest : ctxt:HttpContext -&gt; Async&lt;HttpContext option&gt;<br /><br />Full name: 200-starting-a-web-server-example.getWorkersRequest</div>
<div class="tip" id="fs17">val ctxt : HttpContext</div>
<div class="tip" id="fs18">val async : AsyncBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.async</div>
<div class="tip" id="fs19">val cluster : MBrace.Azure.AzureCluster</div>
<div class="tip" id="fs20">val workers : MBrace.Runtime.WorkerRef []</div>
<div class="tip" id="fs21">property MBrace.Runtime.MBraceClient.Workers: MBrace.Runtime.WorkerRef []</div>
<div class="tip" id="fs22">val msg : string</div>
<div class="tip" id="fs23">module Angular<br /><br />from Webserver</div>
<div class="tip" id="fs24">val header : string<br /><br />Full name: Webserver.Angular.header</div>
<div class="tip" id="fs25">val table : hs:seq&lt;string&gt; -&gt; f:(&#39;T -&gt; #seq&lt;string&gt;) -&gt; xs:seq&lt;&#39;T&gt; -&gt; string list<br /><br />Full name: Webserver.Angular.table</div>
<div class="tip" id="fs26">val w : MBrace.Runtime.WorkerRef</div>
<div class="tip" id="fs27">property MBrace.Runtime.WorkerRef.Id: string</div>
<div class="tip" id="fs28">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.sprintf</div>
<div class="tip" id="fs29">property MBrace.Runtime.WorkerRef.LastHeartbeat: DateTimeOffset</div>
<div class="tip" id="fs30">Multiple items<br />type String =<br />&#160;&#160;new : value:char -&gt; string + 7 overloads<br />&#160;&#160;member Chars : int -&gt; char<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CompareTo : value:obj -&gt; int + 1 overload<br />&#160;&#160;member Contains : value:string -&gt; bool<br />&#160;&#160;member CopyTo : sourceIndex:int * destination:char[] * destinationIndex:int * count:int -&gt; unit<br />&#160;&#160;member EndsWith : value:string -&gt; bool + 2 overloads<br />&#160;&#160;member Equals : obj:obj -&gt; bool + 2 overloads<br />&#160;&#160;member GetEnumerator : unit -&gt; CharEnumerator<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;...<br /><br />Full name: System.String<br /><br />--------------------<br />String(value: nativeptr&lt;char&gt;) : unit<br />String(value: nativeptr&lt;sbyte&gt;) : unit<br />String(value: char []) : unit<br />String(c: char, count: int) : unit<br />String(value: nativeptr&lt;char&gt;, startIndex: int, length: int) : unit<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int) : unit<br />String(value: char [], startIndex: int, length: int) : unit<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int, enc: Text.Encoding) : unit</div>
<div class="tip" id="fs31">val concat : sep:string -&gt; strings:seq&lt;string&gt; -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.String.concat</div>
<div class="tip" id="fs32">val rsp : HttpContext option</div>
<div class="tip" id="fs33">val OK : a:string -&gt; WebPart<br /><br />Full name: Suave.Http.Successful.OK</div>
<div class="tip" id="fs34">val getLogsRequest : ctxt:HttpContext -&gt; Async&lt;HttpContext option&gt;<br /><br />Full name: 200-starting-a-web-server-example.getLogsRequest</div>
<div class="tip" id="fs35">val logs : MBrace.Runtime.SystemLogEntry []</div>
<div class="tip" id="fs36">member MBrace.Runtime.MBraceClient.GetSystemLogs : ?worker:MBrace.Core.IWorkerRef * ?logLevel:MBrace.Runtime.LogLevel * ?filter:(MBrace.Runtime.SystemLogEntry -&gt; bool) -&gt; MBrace.Runtime.SystemLogEntry []</div>
<div class="tip" id="fs37">val w : MBrace.Runtime.SystemLogEntry</div>
<div class="tip" id="fs38">MBrace.Runtime.SystemLogEntry.DateTime: DateTimeOffset</div>
<div class="tip" id="fs39">MBrace.Runtime.SystemLogEntry.Message: string</div>
<div class="tip" id="fs40">val computePrimesRequest : n:&#39;a -&gt; ctxt:HttpContext -&gt; Async&lt;HttpContext option&gt;<br /><br />Full name: 200-starting-a-web-server-example.computePrimesRequest</div>
<div class="tip" id="fs41">val n : &#39;a</div>
<div class="tip" id="fs42">val task : MBrace.Runtime.CloudProcess&lt;obj&gt;</div>
<div class="tip" id="fs43">member MBrace.Runtime.MBraceClient.CreateProcess : workflow:MBrace.Core.Cloud&lt;&#39;T&gt; * ?cancellationToken:MBrace.Core.ICloudCancellationToken * ?faultPolicy:MBrace.Core.FaultPolicy * ?target:MBrace.Core.IWorkerRef * ?additionalResources:MBrace.Core.Internals.ResourceRegistry * ?taskName:string -&gt; MBrace.Runtime.CloudProcess&lt;&#39;T&gt;</div>
<div class="tip" id="fs44">module Sieve</div>
<div class="tip" id="fs45">val getPrimes : nmax:int -&gt; int []<br /><br />Full name: Sieve.getPrimes</div>
<div class="tip" id="fs46">property MBrace.Runtime.CloudProcess.Id: string</div>
<div class="tip" id="fs47">val getJobRequest : v:string -&gt; ctxt:HttpContext -&gt; Async&lt;HttpContext option&gt;<br /><br />Full name: 200-starting-a-web-server-example.getJobRequest</div>
<div class="tip" id="fs48">val v : string</div>
<div class="tip" id="fs49">val task : MBrace.Runtime.CloudProcess</div>
<div class="tip" id="fs50">member MBrace.Runtime.MBraceClient.GetProcessById : processId:string -&gt; MBrace.Runtime.CloudProcess</div>
<div class="tip" id="fs51">property MBrace.Runtime.CloudProcess.Status: MBrace.Core.CloudProcessStatus</div>
<div class="tip" id="fs52">abstract member MBrace.Runtime.CloudProcess.AwaitResultBoxed : ?timeoutMilliseconds:int -&gt; Async&lt;obj&gt;</div>
<div class="tip" id="fs53">val webServerSpec : unit -&gt; WebPart<br /><br />Full name: 200-starting-a-web-server-example.webServerSpec</div>
<div class="tip" id="fs54">val choose : options:WebPart list -&gt; WebPart<br /><br />Full name: Suave.Http.choose</div>
<div class="tip" id="fs55">val GET : WebPart<br /><br />Full name: Suave.Http.Applicatives.GET</div>
<div class="tip" id="fs56">val path : s:string -&gt; WebPart<br /><br />Full name: Suave.Http.Applicatives.path</div>
<div class="tip" id="fs57">val pathScan : pf:PrintfFormat&lt;&#39;a,&#39;b,&#39;c,&#39;d,&#39;t&gt; -&gt; h:(&#39;t -&gt; WebPart) -&gt; WebPart<br /><br />Full name: Suave.Http.Applicatives.pathScan</div>
<div class="tip" id="fs58">val POST : WebPart<br /><br />Full name: Suave.Http.Applicatives.POST</div>
<div class="tip" id="fs59">val cluster : MBrace.Azure.AzureCluster<br /><br />Full name: 200-starting-a-web-server-example.cluster</div>
<div class="tip" id="fs60">member MBrace.Runtime.MBraceClient.ShowProcesses : unit -&gt; unit</div>
<div class="tip" id="fs61">val endPointNames : obj<br /><br />Full name: 200-starting-a-web-server-example.endPointNames</div>
<div class="tip" id="fs62">namespace Microsoft</div>
<div class="tip" id="fs63">namespace Microsoft.WindowsAzure</div>
<div class="tip" id="fs64">namespace Microsoft.WindowsAzure.ServiceRuntime</div>
<div class="tip" id="fs65">type RoleEnvironment =<br />&#160;&#160;static val TraceSource : TraceSource<br />&#160;&#160;static member CurrentRoleInstance : RoleInstance<br />&#160;&#160;static member DeploymentId : string<br />&#160;&#160;static member GetConfigurationSettingValue : configurationSettingName:string -&gt; string<br />&#160;&#160;static member GetLocalResource : localResourceName:string -&gt; LocalResource<br />&#160;&#160;static member IsAvailable : bool<br />&#160;&#160;static member IsEmulated : bool<br />&#160;&#160;static member RequestRecycle : unit -&gt; unit<br />&#160;&#160;static member Roles : IDictionary&lt;string, Role&gt;<br />&#160;&#160;static event Changing : EventHandler&lt;RoleEnvironmentChangingEventArgs&gt;<br />&#160;&#160;...<br /><br />Full name: Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment</div>
<div class="tip" id="fs66">property WindowsAzure.ServiceRuntime.RoleEnvironment.CurrentRoleInstance: WindowsAzure.ServiceRuntime.RoleInstance</div>
<div class="tip" id="fs67">property WindowsAzure.ServiceRuntime.RoleInstance.InstanceEndpoints: Collections.Generic.IDictionary&lt;string,WindowsAzure.ServiceRuntime.RoleInstanceEndpoint&gt;</div>
<div class="tip" id="fs68">property Collections.Generic.IDictionary.Keys: Collections.Generic.ICollection&lt;string&gt;</div>
<div class="tip" id="fs69">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs70">val toArray : source:seq&lt;&#39;T&gt; -&gt; &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Seq.toArray</div>
<div class="tip" id="fs71">member MBrace.Runtime.MBraceClient.Run : workflow:MBrace.Core.Cloud&lt;&#39;T&gt; * ?cancellationToken:MBrace.Core.ICloudCancellationToken * ?faultPolicy:MBrace.Core.FaultPolicy * ?target:MBrace.Core.IWorkerRef * ?additionalResources:MBrace.Core.Internals.ResourceRegistry * ?taskName:string -&gt; &#39;T</div>
<div class="tip" id="fs72">val serverJob : MBrace.Runtime.CloudProcess&lt;obj&gt;<br /><br />Full name: 200-starting-a-web-server-example.serverJob</div>
<div class="tip" id="fs73">val suaveServerInCloud : endPointName:&#39;a -&gt; mkApp:&#39;b -&gt; &#39;c<br /><br />Full name: Webserver.suaveServerInCloud</div>
<div class="tip" id="fs74">member MBrace.Runtime.CloudProcess.ShowInfo : unit -&gt; unit</div>
<div class="tip" id="fs75">override MBrace.Runtime.CloudProcess.ShowLogs : ?filter:(MBrace.Runtime.CloudLogEntry -&gt; bool) -&gt; unit</div>

        </div>
        <div class="span3">
          <a href="http://www.mbrace.io/index.html">
            <img src="http://www.mbrace.io/img/mbrace.png" alt="F# Project" style="width:150px;margin:10px" />
          </a>
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">MBrace.Core and MBrace.Azure</li>
            <li><a href="http://www.mbrace.io/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://www.nuget.org/packages/MBrace.Core">Get Library via NuGet</a></li>
            <li><a href="http://github.com/mbraceproject/MBrace.Core">Source Code on GitHub</a></li>
            <li><a href="http://github.com/mbraceproject/MBrace.Core/blob/master/LICENSE.md">License</a></li>
            <li><a href="http://github.com/mbraceproject/MBrace.Core/blob/master/RELEASE_NOTES.md">Release Notes</a></li>

            <li class="nav-header">Getting Started</li>
            <li><a href="http://www.mbrace.io/thespian-tutorial.html">Local cluster</a></li>
            <li><a href="http://www.mbrace.io/azure-tutorial.html">Azure cluster</a></li>
            <li class="divider"></li>
            <li><a target="_blank" href="http://www.mbrace.io/mbrace-plos.pdf">PLOS'13 Publication</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="http://www.mbrace.io/programming-model.html">Programming model</a></li>
            <li><a href="http://www.mbrace.io/reference/core/index.html">API Reference (MBrace.Core)</a></li>
            <li><a href="http://www.mbrace.io/reference/runtime/index.html">API Reference (MBrace.Runtime)</a></li>
            <li><a href="http://www.mbrace.io/reference/flow/index.html">API Reference (MBrace.Flow)</a></li>
            <li class="divider"></li>
            <li><a href="http://www.mbrace.io/reference/azure/index.html">Reference (Azure)</a></li>
            <li><a href="http://www.mbrace.io/reference/thespian/index.html">Reference (Local)</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/mbraceproject/MBrace.Core"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
