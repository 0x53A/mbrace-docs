<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Combining CloudFlows with FSharp.Data to Analyze Historical UK House Price Data
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="An open source framework for large-scale distributed computation and data processing written in F#."/>
    <meta name="author" content="Jan Dzik, Nick Palladinos, Kostas Rontogiannis, Eirik Tsarpalis"/>
    
    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link rel="icon" type="image/png" href="http://www.m-brace.net/img/favicon-196x196.png" sizes="196x196"/>
    <link rel="icon" type="image/png" href="http://www.m-brace.net/img/favicon-160x160.png" sizes="160x160"/>
    <link rel="icon" type="image/png" href="http://www.m-brace.net/img/favicon-96x96.png" sizes="96x96"/>
    <link rel="icon" type="image/png" href="http://www.m-brace.net/img/favicon-16x16.png" sizes="16x16"/>
    <link rel="icon" type="image/png" href="http://www.m-brace.net/img/favicon-32x32.png" sizes="32x32"/>

    <link type="text/css" rel="stylesheet" href="http://www.m-brace.net/content/style.css" />
    <script type="text/javascript" src="http://www.m-brace.net/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://github.com/mbraceproject/MBrace.Core">github page</a></li>
        </ul>
        <h3 class="muted"><a href="http://www.m-brace.net/index.html">MBrace.Core and MBrace.Azure</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Combining-CloudFlows-with-FSharp-Data-to-Analyze-Historical-UK-House-Price-Data" class="anchor" href="#Combining-CloudFlows-with-FSharp-Data-to-Analyze-Historical-UK-House-Price-Data">Combining CloudFlows with FSharp.Data to Analyze Historical UK House Price Data</a></h1>

<p>In this example, you learn how to use data parallel cloud flows with historical event data
drawn directly from open government data on the internet.  This sample has been adapted
from Isaac Abraham's <a href="https://cockneycoder.wordpress.com/2015/10/20/mbrace-cloudflows-and-fsharp-data-a-perfect-match/">blog</a>.</p>

<p>First, the input data.  (Each of these files is ~70MB but can take a significant amount of time to download
due to possible rate-limiting from the server).</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 15)" onmouseover="showTip(event, 'fs13', 15)" class="i">sources</span> <span class="o">=</span> 
  <span class="c">//if tiny then </span>
  <span class="c">//  [ &quot;https://raw.githubusercontent.com/mbraceproject/MBrace.StarterKit/master/data/SampleHousePriceFile.csv&quot; ]</span>
  <span class="c">//elif medium then </span>
      [ <span class="s">&quot;http://publicdata.landregistry.gov.uk/market-trend-data/price-paid-data/b/pp-2012-part1.csv&quot;</span> ]
  <span class="c">//else</span>
  <span class="c">//  [ &quot;http://publicdata.landregistry.gov.uk/market-trend-data/price-paid-data/a/pp-2012.csv&quot;</span>
  <span class="c">//    &quot;http://publicdata.landregistry.gov.uk/market-trend-data/price-paid-data/a/pp-2013.csv&quot;</span>
  <span class="c">//    &quot;http://publicdata.landregistry.gov.uk/market-trend-data/price-paid-data/a/pp-2014.csv&quot;</span>
  <span class="c">//    &quot;http://publicdata.landregistry.gov.uk/market-trend-data/price-paid-data/a/pp-2015.csv&quot; </span>
  <span class="c">//  ]</span>
</code></pre></td>
</tr>
</table>

<p>You start by using FSharp.Data and its CSV Type Provider. 
Usually the type provider can infer all data types and columns but in this case the file does 
not include headers, so weâ€™ll supply them ourselves. 
You use a local version of the CSV file which contains a subset of the data 
(the live dataset even for a single month is &gt; 10MB)</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs14', 16)" onmouseover="showTip(event, 'fs14', 16)" class="t">HousePrices</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 17)" onmouseover="showTip(event, 'fs15', 17)" class="t">CsvProvider</span><span class="o">&lt;</span> <span class="s">@&quot;../../data/SampleHousePrices.csv&quot;</span>, <span class="i">HasHeaders</span> <span class="o">=</span> <span class="k">true</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>

<p>With that, you have a strongly-typed way to parse CSV data.</p>

<p>Now, stream the data source from the original web location and 
across the cluster, then convert the raw text to our CSV provided type.
Entries are grouped by month and the average price for each month is computed.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 18)" onmouseover="showTip(event, 'fs16', 18)" class="i">pricesTask</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs13', 19)" onmouseover="showTip(event, 'fs13', 19)" class="i">sources</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 20)" onmouseover="showTip(event, 'fs17', 20)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs18', 21)" onmouseover="showTip(event, 'fs18', 21)" class="f">OfHttpFileByLine</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 22)" onmouseover="showTip(event, 'fs17', 22)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs19', 23)" onmouseover="showTip(event, 'fs19', 23)" class="f">collect</span> <span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="t">HousePrices</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 25)" onmouseover="showTip(event, 'fs20', 25)" class="f">ParseRows</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 26)" onmouseover="showTip(event, 'fs17', 26)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 27)" onmouseover="showTip(event, 'fs21', 27)" class="f">averageByKey</span> 
            (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 28)" onmouseover="showTip(event, 'fs22', 28)" class="i">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs22', 29)" onmouseover="showTip(event, 'fs22', 29)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 30)" onmouseover="showTip(event, 'fs23', 30)" class="i">DateOfTransfer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 31)" onmouseover="showTip(event, 'fs24', 31)" class="i">Year</span>, <span onmouseout="hideTip(event, 'fs22', 32)" onmouseover="showTip(event, 'fs22', 32)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 33)" onmouseover="showTip(event, 'fs23', 33)" class="i">DateOfTransfer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 34)" onmouseover="showTip(event, 'fs25', 34)" class="i">Month</span>) <span class="c">// the key of the groups</span>
            (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 35)" onmouseover="showTip(event, 'fs22', 35)" class="i">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs26', 36)" onmouseover="showTip(event, 'fs26', 36)" class="f">float</span> <span onmouseout="hideTip(event, 'fs22', 37)" onmouseover="showTip(event, 'fs22', 37)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 38)" onmouseover="showTip(event, 'fs27', 38)" class="i">Price</span>) <span class="c">// the statistic to average</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 39)" onmouseover="showTip(event, 'fs17', 39)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 40)" onmouseover="showTip(event, 'fs28', 40)" class="f">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 41)" onmouseover="showTip(event, 'fs10', 41)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 42)" onmouseover="showTip(event, 'fs29', 42)" class="f">CreateProcess</span>
</code></pre></td>
</tr>
</table>

<p>A <em>CloudFlow</em> is an MBrace primitive which allows a distributed set of transformations to be chained together.
A CloudFlow pipeline is partitioned across the cluster, making full use of resources available:
only when the pipelines are completed in each partition are they aggregated together again.</p>

<p>Now observe the progress. Time will depend on download speeds to your data center or location.<br />
For the large data sets above you can expect approximately 2 minutes.</p>

<p>While you're waiting, notice that you're using type providers <em>in tandem</em> with cloud computations.
Once we call the ParseRows function, in the next call in the pipeline,
weâ€™re working with a strongly-typed object model â€“ so DateOfTransfer is a proper DateTime etc.
For example, if you hit "." after "row" you will see the available information 
includes <code>Locality</code>, <code>Price</code>, <code>Street</code>, <code>Postcode</code> and so on.
In addition, all dependent assemblies have automatically been shipped with MBrace.
MBrace wasnâ€™t explicitly designed to work with FSharp.Data and F# type providers â€“ <em>it just works</em>.</p>

<p>Now wait for the results.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs16', 43)" onmouseover="showTip(event, 'fs16', 43)" class="i">pricesTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 44)" onmouseover="showTip(event, 'fs30', 44)" class="f">ShowInfo</span>()
<span onmouseout="hideTip(event, 'fs10', 45)" onmouseover="showTip(event, 'fs10', 45)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 46)" onmouseover="showTip(event, 'fs31', 46)" class="f">ShowWorkers</span>()

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 47)" onmouseover="showTip(event, 'fs32', 47)" class="i">prices</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 48)" onmouseover="showTip(event, 'fs16', 48)" class="i">pricesTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 49)" onmouseover="showTip(event, 'fs33', 49)" class="i">Result</span>
</code></pre></td>
</tr>
</table>

<p>Now that you have a summary array of year, month and price data, you can chart the data.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 50)" onmouseover="showTip(event, 'fs34', 50)" class="f">formatYearMonth</span> (<span onmouseout="hideTip(event, 'fs35', 51)" onmouseover="showTip(event, 'fs35', 51)" class="i">year</span>,<span onmouseout="hideTip(event, 'fs36', 52)" onmouseover="showTip(event, 'fs36', 52)" class="i">month</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 53)" onmouseover="showTip(event, 'fs37', 53)" class="f">sprintf</span> <span class="s">&quot;</span><span class="pf">%s</span><span class="s">&quot;</span> (<span onmouseout="hideTip(event, 'fs38', 54)" onmouseover="showTip(event, 'fs38', 54)" class="t">DateTime</span>(<span onmouseout="hideTip(event, 'fs35', 55)" onmouseover="showTip(event, 'fs35', 55)" class="i">year</span>, <span onmouseout="hideTip(event, 'fs36', 56)" onmouseover="showTip(event, 'fs36', 56)" class="i">month</span>, <span class="n">1</span>)<span class="o">.</span><span class="f">ToString</span>(<span class="s">&quot;yyyy-MMM&quot;</span>))

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs39', 57)" onmouseover="showTip(event, 'fs39', 57)" class="f">chartPrices</span> <span onmouseout="hideTip(event, 'fs40', 58)" onmouseover="showTip(event, 'fs40', 58)" class="i">prices</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs40', 59)" onmouseover="showTip(event, 'fs40', 59)" class="i">prices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 60)" onmouseover="showTip(event, 'fs41', 60)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs42', 61)" onmouseover="showTip(event, 'fs42', 61)" class="f">sortBy</span> <span onmouseout="hideTip(event, 'fs43', 62)" onmouseover="showTip(event, 'fs43', 62)" class="f">fst</span> <span class="c">// sort by year, month</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 63)" onmouseover="showTip(event, 'fs41', 63)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs44', 64)" onmouseover="showTip(event, 'fs44', 64)" class="f">map</span>(<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs45', 65)" onmouseover="showTip(event, 'fs45', 65)" class="i">ym</span>, <span onmouseout="hideTip(event, 'fs46', 66)" onmouseover="showTip(event, 'fs46', 66)" class="i">price</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs34', 67)" onmouseover="showTip(event, 'fs34', 67)" class="f">formatYearMonth</span> <span onmouseout="hideTip(event, 'fs45', 68)" onmouseover="showTip(event, 'fs45', 68)" class="i">ym</span>, <span onmouseout="hideTip(event, 'fs46', 69)" onmouseover="showTip(event, 'fs46', 69)" class="i">price</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 70)" onmouseover="showTip(event, 'fs47', 70)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs48', 71)" onmouseover="showTip(event, 'fs48', 71)" class="f">Line</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 72)" onmouseover="showTip(event, 'fs47', 72)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs49', 73)" onmouseover="showTip(event, 'fs49', 73)" class="f">WithOptions</span>(<span onmouseout="hideTip(event, 'fs50', 74)" onmouseover="showTip(event, 'fs50', 74)" class="t">Options</span>(<span class="i">curveType</span> <span class="o">=</span> <span class="s">&quot;function&quot;</span>))
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 75)" onmouseover="showTip(event, 'fs47', 75)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 76)" onmouseover="showTip(event, 'fs51', 76)" class="f">Show</span>

<span onmouseout="hideTip(event, 'fs39', 77)" onmouseover="showTip(event, 'fs39', 77)" class="f">chartPrices</span> <span onmouseout="hideTip(event, 'fs32', 78)" onmouseover="showTip(event, 'fs32', 78)" class="i">prices</span>
</code></pre></td>
</tr>
</table>

<p><img src="../img/house-prices-chart-1.png" alt="Price over time (2012 subset of data)" /></p>

<h2><a name="Persisted-Cloud-Flows" class="anchor" href="#Persisted-Cloud-Flows">Persisted Cloud Flows</a></h2>

<p>To prevent repeated work, MBrace supports something called Persisted Cloud Flows (known in the Spark world as RDDs). 
These are flows whose results are partitioned and cached across the cluster, ready to be re-used again and again. 
This is particularly useful if you have an intermediary result set that you wish to query multiple times.</p>

<p>In this case, you now persist the first few lines of the computation 
(which involves downloading the data from source and parsing with the CSV Type Provider), 
ready to be used for any number of strongly-typed queries we might have: â€“</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// download data, convert to provided type and partition across nodes in-memory only</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 79)" onmouseover="showTip(event, 'fs52', 79)" class="i">persistedHousePricesTask</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs13', 80)" onmouseover="showTip(event, 'fs13', 80)" class="i">sources</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 81)" onmouseover="showTip(event, 'fs17', 81)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs18', 82)" onmouseover="showTip(event, 'fs18', 82)" class="f">OfHttpFileByLine</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 83)" onmouseover="showTip(event, 'fs17', 83)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs19', 84)" onmouseover="showTip(event, 'fs19', 84)" class="f">collect</span> <span onmouseout="hideTip(event, 'fs14', 85)" onmouseover="showTip(event, 'fs14', 85)" class="t">HousePrices</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 86)" onmouseover="showTip(event, 'fs20', 86)" class="f">ParseRows</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 87)" onmouseover="showTip(event, 'fs17', 87)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs53', 88)" onmouseover="showTip(event, 'fs53', 88)" class="f">persist</span> <span class="i">StorageLevel</span><span class="o">.</span><span class="i">Memory</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 89)" onmouseover="showTip(event, 'fs10', 89)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 90)" onmouseover="showTip(event, 'fs29', 90)" class="f">CreateProcess</span>
</code></pre></td>
</tr>
</table>

<p>Now observe progress:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs52', 91)" onmouseover="showTip(event, 'fs52', 91)" class="i">persistedHousePricesTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 92)" onmouseover="showTip(event, 'fs30', 92)" class="f">ShowInfo</span>()
<span onmouseout="hideTip(event, 'fs10', 93)" onmouseover="showTip(event, 'fs10', 93)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 94)" onmouseover="showTip(event, 'fs31', 94)" class="f">ShowWorkers</span>()
</code></pre></td>
</tr>
</table>

<p>Now wait for the results:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 95)" onmouseover="showTip(event, 'fs54', 95)" class="i">persistedHousePrices</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs52', 96)" onmouseover="showTip(event, 'fs52', 96)" class="i">persistedHousePricesTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs55', 97)" onmouseover="showTip(event, 'fs55', 97)" class="i">Result</span>
</code></pre></td>
</tr>
</table>

<p>The input file will have been partitioned depending on the number of workers in your cluster.
The partitions are already assigned to different workers.
With the results persisted on the nodes, we can use them again and again.</p>

<p>First, get the total number of entries across the partitioned, persisted result:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 98)" onmouseover="showTip(event, 'fs56', 98)" class="i">count</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs54', 99)" onmouseover="showTip(event, 'fs54', 99)" class="i">persistedHousePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 100)" onmouseover="showTip(event, 'fs17', 100)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs57', 101)" onmouseover="showTip(event, 'fs57', 101)" class="f">length</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 102)" onmouseover="showTip(event, 'fs10', 102)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 103)" onmouseover="showTip(event, 'fs58', 103)" class="f">Run</span>
</code></pre></td>
</tr>
</table>

<p>Next, get the first 100 entries:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs59', 104)" onmouseover="showTip(event, 'fs59', 104)" class="i">first100</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs54', 105)" onmouseover="showTip(event, 'fs54', 105)" class="i">persistedHousePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 106)" onmouseover="showTip(event, 'fs17', 106)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs60', 107)" onmouseover="showTip(event, 'fs60', 107)" class="f">take</span> <span class="n">100</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 108)" onmouseover="showTip(event, 'fs17', 108)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 109)" onmouseover="showTip(event, 'fs28', 109)" class="f">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 110)" onmouseover="showTip(event, 'fs10', 110)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 111)" onmouseover="showTip(event, 'fs58', 111)" class="f">Run</span>
</code></pre></td>
</tr>
</table>

<p>Next, get the average house price by year/month.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 112)" onmouseover="showTip(event, 'fs61', 112)" class="i">pricesByMonthTask</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs54', 113)" onmouseover="showTip(event, 'fs54', 113)" class="i">persistedHousePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 114)" onmouseover="showTip(event, 'fs17', 114)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 115)" onmouseover="showTip(event, 'fs21', 115)" class="f">averageByKey</span> 
          (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 116)" onmouseover="showTip(event, 'fs22', 116)" class="i">row</span> <span class="k">-&gt;</span> (<span onmouseout="hideTip(event, 'fs22', 117)" onmouseover="showTip(event, 'fs22', 117)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 118)" onmouseover="showTip(event, 'fs23', 118)" class="i">DateOfTransfer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 119)" onmouseover="showTip(event, 'fs24', 119)" class="i">Year</span>, <span onmouseout="hideTip(event, 'fs22', 120)" onmouseover="showTip(event, 'fs22', 120)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 121)" onmouseover="showTip(event, 'fs23', 121)" class="i">DateOfTransfer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 122)" onmouseover="showTip(event, 'fs25', 122)" class="i">Month</span>)) 
          (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 123)" onmouseover="showTip(event, 'fs22', 123)" class="i">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs26', 124)" onmouseover="showTip(event, 'fs26', 124)" class="f">float</span> <span onmouseout="hideTip(event, 'fs22', 125)" onmouseover="showTip(event, 'fs22', 125)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 126)" onmouseover="showTip(event, 'fs27', 126)" class="i">Price</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 127)" onmouseover="showTip(event, 'fs17', 127)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 128)" onmouseover="showTip(event, 'fs28', 128)" class="f">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 129)" onmouseover="showTip(event, 'fs10', 129)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 130)" onmouseover="showTip(event, 'fs29', 130)" class="f">CreateProcess</span>
</code></pre></td>
</tr>
</table>

<p>Make a chart of the results. This will be the same chart as before, but based on persisted results.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs61', 131)" onmouseover="showTip(event, 'fs61', 131)" class="i">pricesByMonthTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 132)" onmouseover="showTip(event, 'fs30', 132)" class="f">ShowInfo</span>()
<span onmouseout="hideTip(event, 'fs61', 133)" onmouseover="showTip(event, 'fs61', 133)" class="i">pricesByMonthTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 134)" onmouseover="showTip(event, 'fs33', 134)" class="i">Result</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs62', 135)" onmouseover="showTip(event, 'fs62', 135)" class="i">pricesByMonth</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs61', 136)" onmouseover="showTip(event, 'fs61', 136)" class="i">pricesByMonthTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 137)" onmouseover="showTip(event, 'fs33', 137)" class="i">Result</span>

<span onmouseout="hideTip(event, 'fs62', 138)" onmouseover="showTip(event, 'fs62', 138)" class="i">pricesByMonth</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs39', 139)" onmouseover="showTip(event, 'fs39', 139)" class="f">chartPrices</span>
</code></pre></td>
</tr>
</table>

<p>Next, get the average prices per street. This takes a fair while since there are a lot of streets.
We persist the results: CloudFlow.cache is the same as persiting to memory.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs63', 140)" onmouseover="showTip(event, 'fs63', 140)" class="i">averagePricesTask</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs54', 141)" onmouseover="showTip(event, 'fs54', 141)" class="i">persistedHousePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 142)" onmouseover="showTip(event, 'fs17', 142)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 143)" onmouseover="showTip(event, 'fs21', 143)" class="f">averageByKey</span>
          (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 144)" onmouseover="showTip(event, 'fs22', 144)" class="i">row</span> <span class="k">-&gt;</span> (<span onmouseout="hideTip(event, 'fs22', 145)" onmouseover="showTip(event, 'fs22', 145)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 146)" onmouseover="showTip(event, 'fs64', 146)" class="i">TownCity</span>, <span onmouseout="hideTip(event, 'fs22', 147)" onmouseover="showTip(event, 'fs22', 147)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs65', 148)" onmouseover="showTip(event, 'fs65', 148)" class="i">Street</span>))
          (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 149)" onmouseover="showTip(event, 'fs22', 149)" class="i">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs26', 150)" onmouseover="showTip(event, 'fs26', 150)" class="f">float</span> <span onmouseout="hideTip(event, 'fs22', 151)" onmouseover="showTip(event, 'fs22', 151)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 152)" onmouseover="showTip(event, 'fs27', 152)" class="i">Price</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 153)" onmouseover="showTip(event, 'fs17', 153)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs66', 154)" onmouseover="showTip(event, 'fs66', 154)" class="f">cache</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 155)" onmouseover="showTip(event, 'fs10', 155)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 156)" onmouseover="showTip(event, 'fs29', 156)" class="f">CreateProcess</span>

<span onmouseout="hideTip(event, 'fs63', 157)" onmouseover="showTip(event, 'fs63', 157)" class="i">averagePricesTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 158)" onmouseover="showTip(event, 'fs30', 158)" class="f">ShowInfo</span>()

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 159)" onmouseover="showTip(event, 'fs67', 159)" class="i">averagePrices</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs63', 160)" onmouseover="showTip(event, 'fs63', 160)" class="i">averagePricesTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 161)" onmouseover="showTip(event, 'fs68', 161)" class="i">Result</span>
</code></pre></td>
</tr>
</table>

<p>Next, use the cached results to get the most expensive city and street.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs69', 162)" onmouseover="showTip(event, 'fs69', 162)" class="i">mostExpensive</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs67', 163)" onmouseover="showTip(event, 'fs67', 163)" class="i">averagePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 164)" onmouseover="showTip(event, 'fs17', 164)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 165)" onmouseover="showTip(event, 'fs70', 165)" class="f">sortByDescending</span> <span onmouseout="hideTip(event, 'fs71', 166)" onmouseover="showTip(event, 'fs71', 166)" class="f">snd</span> <span class="n">100</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 167)" onmouseover="showTip(event, 'fs17', 167)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 168)" onmouseover="showTip(event, 'fs28', 168)" class="f">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 169)" onmouseover="showTip(event, 'fs10', 169)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 170)" onmouseover="showTip(event, 'fs58', 170)" class="f">Run</span>
</code></pre></td>
</tr>
</table>

<p>Next, use the cached results to also get the least expensive city and street.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs72', 171)" onmouseover="showTip(event, 'fs72', 171)" class="i">leastExpensive</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs67', 172)" onmouseover="showTip(event, 'fs67', 172)" class="i">averagePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 173)" onmouseover="showTip(event, 'fs17', 173)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 174)" onmouseover="showTip(event, 'fs73', 174)" class="f">sortBy</span> <span onmouseout="hideTip(event, 'fs71', 175)" onmouseover="showTip(event, 'fs71', 175)" class="f">snd</span> <span class="n">100</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 176)" onmouseover="showTip(event, 'fs17', 176)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 177)" onmouseover="showTip(event, 'fs28', 177)" class="f">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 178)" onmouseover="showTip(event, 'fs10', 178)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 179)" onmouseover="showTip(event, 'fs58', 179)" class="f">Run</span>
</code></pre></td>
</tr>
</table>

<p>Count the sales by city:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs74', 180)" onmouseover="showTip(event, 'fs74', 180)" class="i">purchasesByCity</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs54', 181)" onmouseover="showTip(event, 'fs54', 181)" class="i">persistedHousePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 182)" onmouseover="showTip(event, 'fs17', 182)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs75', 183)" onmouseover="showTip(event, 'fs75', 183)" class="f">countBy</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 184)" onmouseover="showTip(event, 'fs22', 184)" class="i">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs22', 185)" onmouseover="showTip(event, 'fs22', 185)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 186)" onmouseover="showTip(event, 'fs64', 186)" class="i">TownCity</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 187)" onmouseover="showTip(event, 'fs17', 187)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 188)" onmouseover="showTip(event, 'fs28', 188)" class="f">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 189)" onmouseover="showTip(event, 'fs10', 189)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 190)" onmouseover="showTip(event, 'fs58', 190)" class="f">Run</span>

<span onmouseout="hideTip(event, 'fs47', 191)" onmouseover="showTip(event, 'fs47', 191)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 192)" onmouseover="showTip(event, 'fs76', 192)" class="f">Pie</span> <span onmouseout="hideTip(event, 'fs74', 193)" onmouseover="showTip(event, 'fs74', 193)" class="i">purchasesByCity</span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 194)" onmouseover="showTip(event, 'fs47', 194)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 195)" onmouseover="showTip(event, 'fs51', 195)" class="f">Show</span>
</code></pre></td>
</tr>
</table>

<p><img src="../img/house-prices-by-city.png" alt="Count by city" /></p>

<p>Finally, as an example of a different kind of statistic, get the percentage of new builds by county:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 196)" onmouseover="showTip(event, 'fs77', 196)" class="i">newBuildsByCountyTask</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs54', 197)" onmouseover="showTip(event, 'fs54', 197)" class="i">persistedHousePrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 198)" onmouseover="showTip(event, 'fs17', 198)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 199)" onmouseover="showTip(event, 'fs21', 199)" class="f">averageByKey</span>
          (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 200)" onmouseover="showTip(event, 'fs22', 200)" class="i">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs22', 201)" onmouseover="showTip(event, 'fs22', 201)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs78', 202)" onmouseover="showTip(event, 'fs78', 202)" class="i">County</span>)
          (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 203)" onmouseover="showTip(event, 'fs22', 203)" class="i">row</span> <span class="k">-&gt;</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs22', 204)" onmouseover="showTip(event, 'fs22', 204)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs79', 205)" onmouseover="showTip(event, 'fs79', 205)" class="i">NewBuild</span> <span class="o">=</span> <span class="s">&quot;Y&quot;</span> <span class="k">then</span> <span class="n">1.0</span> <span class="k">else</span> <span class="n">0.0</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 206)" onmouseover="showTip(event, 'fs17', 206)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 207)" onmouseover="showTip(event, 'fs70', 207)" class="f">sortByDescending</span> <span onmouseout="hideTip(event, 'fs71', 208)" onmouseover="showTip(event, 'fs71', 208)" class="f">snd</span> <span class="n">100</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs17', 209)" onmouseover="showTip(event, 'fs17', 209)" class="t">CloudFlow</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 210)" onmouseover="showTip(event, 'fs28', 210)" class="f">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 211)" onmouseover="showTip(event, 'fs10', 211)" class="i">cluster</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 212)" onmouseover="showTip(event, 'fs29', 212)" class="f">CreateProcess</span>

<span onmouseout="hideTip(event, 'fs77', 213)" onmouseover="showTip(event, 'fs77', 213)" class="i">newBuildsByCountyTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 214)" onmouseover="showTip(event, 'fs30', 214)" class="f">ShowInfo</span>()
<span onmouseout="hideTip(event, 'fs77', 215)" onmouseover="showTip(event, 'fs77', 215)" class="i">newBuildsByCountyTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 216)" onmouseover="showTip(event, 'fs80', 216)" class="i">Result</span>
</code></pre></td>
</tr>
</table>

<p>Make a chart of the results:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs47', 217)" onmouseover="showTip(event, 'fs47', 217)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs81', 218)" onmouseover="showTip(event, 'fs81', 218)" class="f">Column</span> <span onmouseout="hideTip(event, 'fs77', 219)" onmouseover="showTip(event, 'fs77', 219)" class="i">newBuildsByCountyTask</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 220)" onmouseover="showTip(event, 'fs80', 220)" class="i">Result</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 221)" onmouseover="showTip(event, 'fs47', 221)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 222)" onmouseover="showTip(event, 'fs51', 222)" class="f">Show</span>
</code></pre></td>
</tr>
</table>

<p>And so on.</p>

<p>So notice that the first query takes 45 seconds to execute,
which involves downloading the data and parsing it via the CSV type provider. 
Once weâ€™ve done that, we persist it across the cluster in memory â€“ 
then we can re-use that persisted flow in all subsequent queries, each of which just takes a few seconds to run.</p>

<h2><a name="Summary" class="anchor" href="#Summary">Summary</a></h2>

<p>In this example, you've learned how to use data parallel cloud flows with historical event data
drawn directly from the internet.  By using F# type providers (FSharp.Data) plus a sample of the data 
you have given strong types to your information.  You then learned how to persist partial results
and to calulate averages and sums of groups of the data.</p>

<p>Continue with further samples to learn more about the MBrace programming model.</p>

<blockquote>
  <p>Note, you can use the above techniques from both scripts and compiled projects. To see the components referenced 
by this script, see <a href="../ThespianCluster.html">ThespianCluster.fsx</a> or <a href="../AzureCluster.html">AzureCluster.fsx</a>.</p>
</blockquote>

<div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">namespace System.IO</div>
<div class="tip" id="fs3">namespace XPlot</div>
<div class="tip" id="fs4">module GoogleCharts<br /><br />from XPlot</div>
<div class="tip" id="fs5">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="tip" id="fs6">Multiple items<br />namespace FSharp.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs7">namespace MBrace</div>
<div class="tip" id="fs8">namespace MBrace.Core</div>
<div class="tip" id="fs9">namespace MBrace.Flow</div>
<div class="tip" id="fs10">val cluster : MBrace.Thespian.ThespianCluster<br /><br />Full name: 200-house-data-analysis-example.cluster</div>
<div class="tip" id="fs11">module Config</div>
<div class="tip" id="fs12">val GetCluster : unit -&gt; MBrace.Thespian.ThespianCluster<br /><br />Full name: Config.GetCluster<br /><em><br /><br />&#160;Gets or creates a new Thespian cluster session.</em></div>
<div class="tip" id="fs13">val sources : string list<br /><br />Full name: 200-house-data-analysis-example.sources</div>
<div class="tip" id="fs14">type HousePrices = CsvProvider&lt;...&gt;<br /><br />Full name: 200-house-data-analysis-example.HousePrices</div>
<div class="tip" id="fs15">type CsvProvider<br /><br />Full name: FSharp.Data.CsvProvider<br /><em><br /><br />&lt;summary&gt;Typed representation of a CSV file.&lt;/summary&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Sample&#39;&gt;Location of a CSV sample file or a string containing a sample CSV document.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Separators&#39;&gt;Column delimiter(s). Defaults to `,`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;InferRows&#39;&gt;Number of rows to use for inference. Defaults to `1000`. If this is zero, all rows are used.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Schema&#39;&gt;Optional column types, in a comma separated list. Valid types are `int`, `int64`, `bool`, `float`, `decimal`, `date`, `guid`, `string`, `int?`, `int64?`, `bool?`, `float?`, `decimal?`, `date?`, `guid?`, `int option`, `int64 option`, `bool option`, `float option`, `decimal option`, `date option`, `guid option` and `string option`.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;You can also specify a unit and the name of the column like this: `Name (type&amp;lt;unit&amp;gt;)`, or you can override only the name. If you don&#39;t want to specify all the columns, you can reference the columns by name like this: `ColumnName=type`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;HasHeaders&#39;&gt;Whether the sample contains the names of the columns as its first line.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;IgnoreErrors&#39;&gt;Whether to ignore rows that have the wrong number of columns or which can&#39;t be parsed using the inferred or specified schema. Otherwise an exception is thrown when these rows are encountered.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;SkipRows&#39;&gt;SKips the first n rows of the CSV file.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;AssumeMissingValues&#39;&gt;When set to true, the type provider will assume all columns can have missing values, even if in the provided sample all values are present. Defaults to false.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;PreferOptionals&#39;&gt;When set to true, inference will prefer to use the option type instead of nullable types, `double.NaN` or `&quot;&quot;` for missing values. Defaults to false.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Quote&#39;&gt;The quotation mark (for surrounding values containing the delimiter). Defaults to `&quot;`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;MissingValues&#39;&gt;The set of strings recogized as missing values. Defaults to `NaN,NA,N/A,#N/A,:,-,TBA,TBD`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;CacheRows&#39;&gt;Whether the rows should be caches so they can be iterated multiple times. Defaults to true. Disable for large datasets.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Culture&#39;&gt;The culture used for parsing numbers and dates. Defaults to the invariant culture.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Encoding&#39;&gt;The encoding used to read the sample. You can specify either the character set name or the codepage number. Defaults to UTF8 for files, and to ISO-8859-1 the for HTTP requests, unless `charset` is specified in the `Content-Type` response header.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;ResolutionFolder&#39;&gt;A directory that is used when resolving relative file references (at design time and in hosted execution).&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;EmbeddedResource&#39;&gt;When specified, the type provider first attempts to load the sample from the specified resource <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(e.g. &#39;MyCompany.MyAssembly, resource_name.csv&#39;). This is useful when exposing types generated by the type provider.&lt;/param&gt;</em></div>
<div class="tip" id="fs16">val pricesTask : MBrace.Runtime.CloudProcess&lt;((int * int) * float) []&gt;<br /><br />Full name: 200-house-data-analysis-example.pricesTask</div>
<div class="tip" id="fs17">Multiple items<br />module CloudFlow<br /><br />from MBrace.Flow<br /><br />--------------------<br />module CloudFlow<br /><br />from Utils<br /><br />--------------------<br />type CloudFlow =<br />&#160;&#160;static member OfArray : source:&#39;T [] -&gt; CloudFlow&lt;&#39;T&gt;<br />&#160;&#160;static member OfCloudArrays : cloudArrays:seq&lt;#CloudArray&lt;&#39;T&gt;&gt; -&gt; LocalCloud&lt;PersistedCloudFlow&lt;&#39;T&gt;&gt;<br />&#160;&#160;static member OfCloudCollection : collection:ICloudCollection&lt;&#39;T&gt; * ?sizeThresholdPerWorker:(unit -&gt; int64) -&gt; CloudFlow&lt;&#39;T&gt;<br />&#160;&#160;static member OfCloudDirectory : dirPath:string * serializer:ISerializer * ?sizeThresholdPerCore:int64 -&gt; CloudFlow&lt;&#39;T&gt;<br />&#160;&#160;static member OfCloudDirectory : dirPath:string * ?deserializer:(Stream -&gt; seq&lt;&#39;T&gt;) * ?sizeThresholdPerCore:int64 -&gt; CloudFlow&lt;&#39;T&gt;<br />&#160;&#160;static member OfCloudDirectory : dirPath:string * deserializer:(TextReader -&gt; seq&lt;&#39;T&gt;) * ?encoding:Encoding * ?sizeThresholdPerCore:int64 -&gt; CloudFlow&lt;&#39;T&gt;<br />&#160;&#160;static member OfCloudDirectoryByLine : dirPath:string * ?encoding:Encoding * ?sizeThresholdPerCore:int64 -&gt; CloudFlow&lt;string&gt;<br />&#160;&#160;static member OfCloudFileByLine : path:string * ?encoding:Encoding -&gt; CloudFlow&lt;string&gt;<br />&#160;&#160;static member OfCloudFileByLine : paths:seq&lt;string&gt; * ?encoding:Encoding * ?sizeThresholdPerCore:int64 -&gt; CloudFlow&lt;string&gt;<br />&#160;&#160;static member OfCloudFiles : paths:seq&lt;string&gt; * serializer:ISerializer * ?sizeThresholdPerCore:int64 -&gt; CloudFlow&lt;&#39;T&gt;<br />&#160;&#160;...<br /><br />Full name: MBrace.Flow.CloudFlow<br /><br />--------------------<br />type CloudFlow&lt;&#39;T&gt; =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member WithEvaluators : collectorFactory:LocalCloud&lt;Collector&lt;&#39;T,&#39;S&gt;&gt; -&gt; projection:(&#39;S -&gt; LocalCloud&lt;&#39;R&gt;) -&gt; combiner:(&#39;R [] -&gt; LocalCloud&lt;&#39;R&gt;) -&gt; Cloud&lt;&#39;R&gt;<br />&#160;&#160;&#160;&#160;abstract member DegreeOfParallelism : int option<br />&#160;&#160;end<br /><br />Full name: MBrace.Flow.CloudFlow&lt;_&gt;</div>
<div class="tip" id="fs18">static member CloudFlow.OfHttpFileByLine : urls:seq&lt;string&gt; * ?encoding:Text.Encoding -&gt; CloudFlow&lt;string&gt;<br />static member CloudFlow.OfHttpFileByLine : url:string * ?encoding:Text.Encoding -&gt; CloudFlow&lt;string&gt;</div>
<div class="tip" id="fs19">val collect : f:(&#39;T -&gt; #seq&lt;&#39;R&gt;) -&gt; flow:CloudFlow&lt;&#39;T&gt; -&gt; CloudFlow&lt;&#39;R&gt;<br /><br />Full name: MBrace.Flow.CloudFlow.collect</div>
<div class="tip" id="fs20">CsvProvider&lt;...&gt;.ParseRows(text: string) : CsvProvider&lt;...&gt;.Row []</div>
<div class="tip" id="fs21">val averageByKey : keyf:(&#39;T -&gt; &#39;Key) -&gt; valf:(&#39;T -&gt; &#39;Val) -&gt; x:CloudFlow&lt;&#39;T&gt; -&gt; CloudFlow&lt;&#39;Key * &#39;Val&gt; (requires equality and member ( + ) and member get_Zero and member DivideByInt)<br /><br />Full name: Utils.CloudFlow.averageByKey</div>
<div class="tip" id="fs22">val row : CsvProvider&lt;...&gt;.Row</div>
<div class="tip" id="fs23">property CsvProvider&lt;...&gt;.Row.DateOfTransfer: DateTime</div>
<div class="tip" id="fs24">property DateTime.Year: int</div>
<div class="tip" id="fs25">property DateTime.Month: int</div>
<div class="tip" id="fs26">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs27">property CsvProvider&lt;...&gt;.Row.Price: int</div>
<div class="tip" id="fs28">val toArray : flow:CloudFlow&lt;&#39;T&gt; -&gt; MBrace.Core.Cloud&lt;&#39;T []&gt;<br /><br />Full name: MBrace.Flow.CloudFlow.toArray</div>
<div class="tip" id="fs29">member MBrace.Runtime.MBraceClient.CreateProcess : workflow:MBrace.Core.Cloud&lt;&#39;T&gt; * ?cancellationToken:MBrace.Core.ICloudCancellationToken * ?faultPolicy:MBrace.Core.FaultPolicy * ?target:MBrace.Core.IWorkerRef * ?additionalResources:MBrace.Core.Internals.ResourceRegistry * ?taskName:string -&gt; MBrace.Runtime.CloudProcess&lt;&#39;T&gt;</div>
<div class="tip" id="fs30">member MBrace.Runtime.CloudProcess.ShowInfo : unit -&gt; unit</div>
<div class="tip" id="fs31">member MBrace.Runtime.MBraceClient.ShowWorkers : unit -&gt; unit</div>
<div class="tip" id="fs32">val prices : ((int * int) * float) []<br /><br />Full name: 200-house-data-analysis-example.prices</div>
<div class="tip" id="fs33">property MBrace.Runtime.CloudProcess.Result: ((int * int) * float) []</div>
<div class="tip" id="fs34">val formatYearMonth : year:int * month:int -&gt; string<br /><br />Full name: 200-house-data-analysis-example.formatYearMonth</div>
<div class="tip" id="fs35">val year : int</div>
<div class="tip" id="fs36">val month : int</div>
<div class="tip" id="fs37">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.sprintf</div>
<div class="tip" id="fs38">Multiple items<br />type DateTime =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : ticks:int64 -&gt; DateTime + 10 overloads<br />&#160;&#160;&#160;&#160;member Add : value:TimeSpan -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddDays : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddHours : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMilliseconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMinutes : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMonths : months:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddSeconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddTicks : value:int64 -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddYears : value:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.DateTime<br /><br />--------------------<br />DateTime()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, calendar: Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="tip" id="fs39">val chartPrices : prices:seq&lt;(int * int) * #value&gt; -&gt; GoogleChart<br /><br />Full name: 200-house-data-analysis-example.chartPrices</div>
<div class="tip" id="fs40">val prices : seq&lt;(int * int) * #value&gt;</div>
<div class="tip" id="fs41">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs42">val sortBy : projection:(&#39;T -&gt; &#39;Key) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Seq.sortBy</div>
<div class="tip" id="fs43">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
<div class="tip" id="fs44">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map</div>
<div class="tip" id="fs45">val ym : int * int</div>
<div class="tip" id="fs46">val price : #value</div>
<div class="tip" id="fs47">type Chart =<br />&#160;&#160;static member Annotation : data:seq&lt;#seq&lt;DateTime * &#39;V * string * string&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;V :&gt; value)<br />&#160;&#160;static member Annotation : data:seq&lt;DateTime * #value * string * string&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Area : data:seq&lt;#seq&lt;&#39;K * &#39;V&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;K :&gt; key and &#39;V :&gt; value)<br />&#160;&#160;static member Area : data:seq&lt;#key * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bar : data:seq&lt;#seq&lt;&#39;K * &#39;V&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;K :&gt; key and &#39;V :&gt; value)<br />&#160;&#160;static member Bar : data:seq&lt;#key * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bubble : data:seq&lt;string * #value * #value * #value * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bubble : data:seq&lt;string * #value * #value * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bubble : data:seq&lt;string * #value * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Calendar : data:seq&lt;DateTime * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;...<br /><br />Full name: XPlot.GoogleCharts.Chart</div>
<div class="tip" id="fs48">static member Chart.Line : data:seq&lt;#seq&lt;&#39;K * &#39;V&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;K :&gt; key and &#39;V :&gt; value)<br />static member Chart.Line : data:seq&lt;#key * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart</div>
<div class="tip" id="fs49">static member Chart.WithOptions : options:Options -&gt; chart:GoogleChart -&gt; GoogleChart</div>
<div class="tip" id="fs50">Multiple items<br />type Options =<br />&#160;&#160;new : unit -&gt; Options<br />&#160;&#160;member ShouldSerializeaggregationTarget : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeallValuesSuffix : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeallowHtml : unit -&gt; bool<br />&#160;&#160;member ShouldSerializealternatingRowStyle : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeanimation : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeannotations : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeannotationsWidth : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeareaOpacity : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeavoidOverlappingGridLines : unit -&gt; bool<br />&#160;&#160;...<br /><br />Full name: XPlot.GoogleCharts.Configuration.Options<br /><br />--------------------<br />new : unit -&gt; Options</div>
<div class="tip" id="fs51">static member Chart.Show : chart:GoogleChart -&gt; GoogleChart</div>
<div class="tip" id="fs52">val persistedHousePricesTask : MBrace.Runtime.CloudProcess&lt;PersistedCloudFlow&lt;CsvProvider&lt;...&gt;.Row&gt;&gt;<br /><br />Full name: 200-house-data-analysis-example.persistedHousePricesTask</div>
<div class="tip" id="fs53">val persist : storageLevel:MBrace.Core.StorageLevel -&gt; flow:CloudFlow&lt;&#39;T&gt; -&gt; MBrace.Core.Cloud&lt;PersistedCloudFlow&lt;&#39;T&gt;&gt;<br /><br />Full name: MBrace.Flow.CloudFlow.persist</div>
<div class="tip" id="fs54">val persistedHousePrices : PersistedCloudFlow&lt;CsvProvider&lt;...&gt;.Row&gt;<br /><br />Full name: 200-house-data-analysis-example.persistedHousePrices</div>
<div class="tip" id="fs55">property MBrace.Runtime.CloudProcess.Result: PersistedCloudFlow&lt;CsvProvider&lt;...&gt;.Row&gt;</div>
<div class="tip" id="fs56">val count : int64<br /><br />Full name: 200-house-data-analysis-example.count</div>
<div class="tip" id="fs57">val length : flow:CloudFlow&lt;&#39;T&gt; -&gt; MBrace.Core.Cloud&lt;int64&gt;<br /><br />Full name: MBrace.Flow.CloudFlow.length</div>
<div class="tip" id="fs58">member MBrace.Runtime.MBraceClient.Run : workflow:MBrace.Core.Cloud&lt;&#39;T&gt; * ?cancellationToken:MBrace.Core.ICloudCancellationToken * ?faultPolicy:MBrace.Core.FaultPolicy * ?target:MBrace.Core.IWorkerRef * ?additionalResources:MBrace.Core.Internals.ResourceRegistry * ?taskName:string -&gt; &#39;T</div>
<div class="tip" id="fs59">val first100 : CsvProvider&lt;...&gt;.Row []<br /><br />Full name: 200-house-data-analysis-example.first100</div>
<div class="tip" id="fs60">val take : n:int -&gt; flow:CloudFlow&lt;&#39;T&gt; -&gt; CloudFlow&lt;&#39;T&gt;<br /><br />Full name: MBrace.Flow.CloudFlow.take</div>
<div class="tip" id="fs61">val pricesByMonthTask : MBrace.Runtime.CloudProcess&lt;((int * int) * float) []&gt;<br /><br />Full name: 200-house-data-analysis-example.pricesByMonthTask</div>
<div class="tip" id="fs62">val pricesByMonth : ((int * int) * float) []<br /><br />Full name: 200-house-data-analysis-example.pricesByMonth</div>
<div class="tip" id="fs63">val averagePricesTask : MBrace.Runtime.CloudProcess&lt;PersistedCloudFlow&lt;(string * string) * float&gt;&gt;<br /><br />Full name: 200-house-data-analysis-example.averagePricesTask</div>
<div class="tip" id="fs64">property CsvProvider&lt;...&gt;.Row.TownCity: string</div>
<div class="tip" id="fs65">property CsvProvider&lt;...&gt;.Row.Street: string</div>
<div class="tip" id="fs66">val cache : flow:CloudFlow&lt;&#39;T&gt; -&gt; MBrace.Core.Cloud&lt;PersistedCloudFlow&lt;&#39;T&gt;&gt;<br /><br />Full name: MBrace.Flow.CloudFlow.cache</div>
<div class="tip" id="fs67">val averagePrices : PersistedCloudFlow&lt;(string * string) * float&gt;<br /><br />Full name: 200-house-data-analysis-example.averagePrices</div>
<div class="tip" id="fs68">property MBrace.Runtime.CloudProcess.Result: PersistedCloudFlow&lt;(string * string) * float&gt;</div>
<div class="tip" id="fs69">val mostExpensive : ((string * string) * float) []<br /><br />Full name: 200-house-data-analysis-example.mostExpensive</div>
<div class="tip" id="fs70">val sortByDescending : projection:(&#39;T -&gt; &#39;Key) -&gt; takeCount:int -&gt; flow:CloudFlow&lt;&#39;T&gt; -&gt; CloudFlow&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: MBrace.Flow.CloudFlow.sortByDescending</div>
<div class="tip" id="fs71">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Operators.snd</div>
<div class="tip" id="fs72">val leastExpensive : ((string * string) * float) []<br /><br />Full name: 200-house-data-analysis-example.leastExpensive</div>
<div class="tip" id="fs73">val sortBy : projection:(&#39;T -&gt; &#39;Key) -&gt; takeCount:int -&gt; flow:CloudFlow&lt;&#39;T&gt; -&gt; CloudFlow&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: MBrace.Flow.CloudFlow.sortBy</div>
<div class="tip" id="fs74">val purchasesByCity : (string * int64) []<br /><br />Full name: 200-house-data-analysis-example.purchasesByCity</div>
<div class="tip" id="fs75">val countBy : projection:(&#39;T -&gt; &#39;Key) -&gt; flow:CloudFlow&lt;&#39;T&gt; -&gt; CloudFlow&lt;&#39;Key * int64&gt; (requires equality)<br /><br />Full name: MBrace.Flow.CloudFlow.countBy</div>
<div class="tip" id="fs76">static member Chart.Pie : data:seq&lt;string * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart</div>
<div class="tip" id="fs77">val newBuildsByCountyTask : MBrace.Runtime.CloudProcess&lt;(string * float) []&gt;<br /><br />Full name: 200-house-data-analysis-example.newBuildsByCountyTask</div>
<div class="tip" id="fs78">property CsvProvider&lt;...&gt;.Row.County: string</div>
<div class="tip" id="fs79">property CsvProvider&lt;...&gt;.Row.NewBuild: string</div>
<div class="tip" id="fs80">property MBrace.Runtime.CloudProcess.Result: (string * float) []</div>
<div class="tip" id="fs81">static member Chart.Column : data:seq&lt;#seq&lt;&#39;K * &#39;V&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;K :&gt; key and &#39;V :&gt; value)<br />static member Chart.Column : data:seq&lt;#key * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart</div>

        </div>
        <div class="span3">
          <a href="http://www.m-brace.net/index.html">
            <img src="http://www.m-brace.net/img/mbrace.png" alt="F# Project" style="width:150px;margin:10px" />
          </a>
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">MBrace.Core and MBrace.Azure</li>
            <li><a href="http://www.m-brace.net/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://www.nuget.org/packages/MBrace.Core">Get Library via NuGet</a></li>
            <li><a href="http://github.com/mbraceproject/MBrace.Core">Source Code on GitHub</a></li>
            <li><a href="http://github.com/mbraceproject/MBrace.Core/blob/master/LICENSE.md">License</a></li>
            <li><a href="http://github.com/mbraceproject/MBrace.Core/blob/master/RELEASE_NOTES.md">Release Notes</a></li>

            <li class="nav-header">Getting Started</li>
            <li><a href="http://www.m-brace.net/thespian-tutorial.html">Local cluster</a></li>
            <li><a href="http://www.m-brace.net/azure-tutorial.html">Azure cluster</a></li>
            <li class="divider"></li>
            <li><a target="_blank" href="http://www.m-brace.net/mbrace-plos.pdf">PLOS'13 Publication</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="http://www.m-brace.net/programming-model.html">Programming model</a></li>
            <li><a href="http://www.m-brace.net/reference/core/index.html">API Reference (MBrace.Core)</a></li>
            <li><a href="http://www.m-brace.net/reference/runtime/index.html">API Reference (MBrace.Runtime)</a></li>
            <li><a href="http://www.m-brace.net/reference/flow/index.html">API Reference (MBrace.Flow)</a></li>
            <li class="divider"></li>
            <li><a href="http://www.m-brace.net/reference/azure/index.html">Reference (Azure)</a></li>
            <li><a href="http://www.m-brace.net/reference/thespian/index.html">Reference (Local)</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/mbraceproject/MBrace.Core"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
